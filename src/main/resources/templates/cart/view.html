<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{/layout/index :: dynamic(~{::main})}">

<head>
	<meta charset="utf-8">
	<title>Insert title here</title>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
</head>

<body>
	<main>
		<div class="panel panel-primary" th:fragment="shopping_cart">
			<div class="page-path">
				<div class="container">
					<div class="breadcrumbs-inner">
						<h1 class="path-title">Giỏ hàng</h1>
						<ul>
							<li>
								<a class="home-page-link" href="/product/list">Trang chủ <i
										class="fal fa-angle-right"></i></a>
							</li>
							<li>
								<a class="current-page" href="#">Giỏ hàng</a>
							</li>
						</ul>
					</div>
				</div>
			</div>

			<div class="container">
				<h5 class="section-title mt-5">Danh sách sản phẩm</h5>
				<div class="row" ng-if="cart.count > 0">
					<div class="col-8">
						<table class="table mt-2">
							<tbody>
								<tr ng-repeat="item in cart.items">
									<td>
										<div class="product-thumb"><img width="80px" height="80px" src="{{item.image}}"
												alt="product-thumb">
										</div>
									</td>
									<td>
										<div class="product-title-area">
											<h4 class="product-title">{{item.name}}</h4>
										</div>
									</td>
									<td><span class="product-price mt-4">{{item.price.toLocaleString('vi-VN') }} VNĐ</span></td>
									<td>
										<div class="cart-edit">
											<div class="quantity-edit mt-3">
												<input type="number" class="form-control"
													ng-change="cart.saveToLocalStorage()" ng-model="item.qty" min="1" />
											</div>
										</div>
									</td>
									<td class="last-td"><button ng-click="cart.remove(item.id)"
											class="btn btn-sm btn-danger mt-4">
											<i class="glyphicon glyphicon-trash"></i> Xóa
										</button></td>
								</tr>
							</tbody>
						</table>
					</div>
					<div class="col-4 text-center">
						<div>
							<p>Tổng tiền: <span id="amount">{{cart.amount.toLocaleString('vi-VN')}} VNĐ</span></p>
							<p>Số lượng: <span>{{cart.count}}</span> sản phẩm</p>
						</div>
						<div class="mt-3">
							<button  ng-click="cart.clear()" class="btn btn-danger">
								<i class="glyphicon glyphicon-trash"></i>Xóa hết
							</button>
							
								<a th:href="@{/order/checkout}" class="btn btn-success"> <i
										class="glyphicon glyphicon-hand-right"></i>Chốt hàng đã chọn
								</a>
							<br>
							<a href="/product/list" class="mt-2 nav-link text-dark"><i
									class="fal fa-long-arrow-left"></i> &nbsp; <i style="cursor: pointer;"
									class="fa fa-home"></i> Trang Chủ
							</a>
						</div>
					</div>
				</div>
				<div class="row" ng-if="cart.count == 0">
					<h4>Chưa có sản phẩm nào trong giỏ hàng</h4>
				</div>
			</div>
		</div>
	</main>

</body>

</html>